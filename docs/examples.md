## Creating Test Fixtures

### Static fixtures

Here are some examples of how to use the fixture factories.

One article with a random title, as defined in the factory above:
```
$article = ArticleFactory::make()->getEntity();
``` 
Two articles with different random titles:
```
$articles = ArticleFactory::make(2)->getEntities();
``` 
One article with title set to 'Foo'
```
$article = ArticleFactory::make(['title' => 'Foo'])->getEntity();
``` 
Three articles with the title set to 'Foo'
```
$articles = ArticleFactory::make(['title' => 'Foo'], 3)->getEntities();
``` 

In order to persist the data generated, use the method `persist` instead of `getEntity` resp. `getEntities`:
```
$articles = ArticleFactory::make(3)->persist();
```
### Chaining methods
The aim of the test fixture factories is to bring business coherence in your test fixtures.
This can be simply achieved using the chainable methods of your factories. As long as those return `$this`, you may chain as much methods as you require.
In the following example, we make use of a method in the Article factory in order to easily create articles with a job title.
It is a simple study case, but this could be any pattern of your business logic. 
```
$articleFactory = ArticleFactory::make(['title' => 'Foo']);
$articleFoo1 = $articleFactory->persist();
$articleFoo2 = $articleFactory->persist();
$articleJobOffer = $articleFactory->setJobTitle()->persist();
```
 
 The two first articles have a title set two 'Foo'. The third one has a job title, which is randomly generated by fake, as defined n the
 ArticleFactory. 
 
 ### Associations
 If you have baked your factories with the option `-m` or `--methods`, you will have noticed that a method for each association
 has been inserted in the factories. This will assist you creating fixtures for the associated models. For example, we can 
 create an article with 10 authors as follow:
 ```
use App\Test\Factory\ArticleFactory;
use App\Test\Factory\AuthorFactory;
use Faker\Generator;
...
 $article = ArticleFactory::make()->with('authors', AuthorFactory::make(10))->persist();
```
or using the method defined in our Articlefactory:
```
$article = ArticleFactory::make()->withAuthors(10)->persist();
```

If we wish to randomly populate the field `biography` of the 10 authors of our article, with 10 different biographies:
```
$article = ArticleFactory::make()->withAuthors(function(AuthorFactory $factory, Generator $faker) {
    return [
        'biography' => $faker->realText()
    ];
}, 10)->persist();
```
